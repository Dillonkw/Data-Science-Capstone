mutate(BMI = ifelse(BMXBMI >= 18.5 & BMXBMI <= 24.9, "Healthy", "Unhealthy"),
BMI_Binary = ifelse(BMI == "Healthy", 1,0))
table(CleanedData$BMI, useNA = "ifany")
saveRDS(CleanedData, "CleanedDataNew.rds")
knitr::opts_chunk$set(echo = TRUE)
CleanedDataNew <- readRDS("CleanedDataNew.rds")
#Distribution for the numeric BMI variable
p1 <- ggplot(CleanedDataNew, aes(x = BMXBMI)) +
geom_histogram(fill = "#56B4E9", color = "black")+
labs(
title = "Distribution of BMI",
x = "BMI",
y = "Count"
)+
theme_minimal()
#Distribution for the binary BMI variable
p2 <- ggplot(CleanedDataNew, aes(x = factor(BMI), fill = factor(BMI))) +
geom_bar(color = "black")+
scale_fill_manual(values = c("#0072B2", "#E69F00"))+
labs(
title = "Distribution of BMI Binary",
x = "BMI Category",
y = "Count",
fill = "BMI Category"
)+
theme_minimal()
mergeBMI = p1 + p2 + plot_layout(ncol = 1)
install.packages("moments")
library(moments)
library(RColorBrewer)
library(tidyverse)
library(patchwork)
library(corrplot)
CleanedDataNew <- readRDS("CleanedDataNew.rds")
#Distribution for the numeric BMI variable
p1 <- ggplot(CleanedDataNew, aes(x = BMXBMI)) +
geom_histogram(fill = "#56B4E9", color = "black")+
labs(
title = "Distribution of BMI",
x = "BMI",
y = "Count"
)+
theme_minimal()
#Distribution for the binary BMI variable
p2 <- ggplot(CleanedDataNew, aes(x = factor(BMI), fill = factor(BMI))) +
geom_bar(color = "black")+
scale_fill_manual(values = c("#0072B2", "#E69F00"))+
labs(
title = "Distribution of BMI Binary",
x = "BMI Category",
y = "Count",
fill = "BMI Category"
)+
theme_minimal()
mergeBMI = p1 + p2 + plot_layout(ncol = 1)
mergeBMI
setwd("C:/Users/kboom/OneDrive/Documents/GitHub/Data-Science-Capstone") #Working directory for desktop computer
Seed <- 50
#2021-2023 Data
BMXData_21_23 <- read_xpt("RawData/BMX_L.xpt") #Body Measurements Data
BPQData_21_23 <- read_xpt("RawData/BPQ_L.xpt") #Blood Pressure and Cholesterol Data
DemoData_21_23 <- read_xpt("RawData/DEMO_L.xpt") #Demographic Data
DR1TOTData_21_23 <- read_xpt("RawData/DR1TOT_L.xpt") #Dietary Interview - Total Nutrient Intakes, First Day
DSQTOTData_21_23 <- read_xpt("RawData/DSQTOT_L.xpt") #Dietary Supplement Use 30-Day - Total Dietary Supplements
GHBData_21_23 <- read_xpt("RawData/GHB_L.xpt") #Glycohemoglobin
GLUData_21_23 <- read_xpt("RawData/GLU_L.xpt") #Plasma Fasting Glucose
HIQData_21_23 <- read_xpt("RawData/HIQ_L.xpt") #Health Insurance
INSData_21_23 <- read_xpt("RawData/INS_L.xpt") #Insulin
MCQData_21_23 <- read_xpt("RawData/MCQ_L.xpt") #Medical Conditions
PAQData_21_23 <- read_xpt("RawData/PAQ_L.xpt") #Physical Activity
SLQData_21_23 <- read_xpt("RawData/SLQ_L.xpt") #Sleep Disorders
UCPREGData_21_23 <- read_xpt("RawData/UCPREG_L.xpt") #Urine Pregnancy Test
WHQData_21_23 <- read_xpt("RawData/WHQ_L.xpt") #Weight History
#Puts all the individual datasets into one list called datasets_21_23
datasets_21_23 <- list(
BMXData_21_23,
BPQData_21_23,
DemoData_21_23,
DR1TOTData_21_23,
DSQTOTData_21_23,
GHBData_21_23,
GLUData_21_23,
HIQData_21_23,
INSData_21_23,
MCQData_21_23,
PAQData_21_23,
SLQData_21_23,
UCPREGData_21_23,
WHQData_21_23
)
FullData_21_23 <- reduce(datasets_21_23, full_join, by = "SEQN") #uses the reduce function to full join the 2021-2023 datasets list by the SEQN variable
FullData_21_23$Survey_Year <- "2021-2023"
#2017-2020 Data
BMXData_17_20 <- read_xpt("RawData/P_BMX.xpt") #Body Measurements Data
BPQData_17_20 <- read_xpt("RawData/P_BPQ.xpt") #Blood Pressure and Cholesterol Data
DemoData_17_20 <- read_xpt("RawData/P_DEMO.xpt") #Demographic Data
DR1TOTData_17_20 <- read_xpt("RawData/P_DR1TOT.xpt") #Dietary Interview - Total Nutrient Intakes, First Day
DSQTOTData_17_20 <- read_xpt("RawData/P_DSQTOT.xpt") #Dietary Supplement Use 30-Day - Total Dietary Supplements
GHBData_17_20 <- read_xpt("RawData/P_GHB.xpt") #Glycohemoglobin
GLUData_17_20 <- read_xpt("RawData/P_GLU.xpt") #Plasma Fasting Glucose
HIQData_17_20 <- read_xpt("RawData/P_HIQ.xpt") #Health Insurance
INSData_17_20 <- read_xpt("RawData/P_INS.xpt") #Insulin
MCQData_17_20 <- read_xpt("RawData/P_MCQ.xpt") #Medical Conditions
PAQData_17_20 <- read_xpt("RawData/P_PAQ.xpt") #Physical Activity
SLQData_17_20 <- read_xpt("RawData/P_SLQ.xpt") #Sleep Disorders
UCPREGData_17_20 <- read_xpt("RawData/P_UCPREG.xpt") #Urine Pregnancy Test
WHQData_17_20 <- read_xpt("RawData/P_WHQ.xpt") #Weight History
#Puts all the individual datasets into one list called datasets_17_20
datasets_17_20 <- list(
BMXData_17_20,
BPQData_17_20,
DemoData_17_20,
DR1TOTData_17_20,
DSQTOTData_17_20,
GHBData_17_20,
GLUData_17_20,
HIQData_17_20,
INSData_17_20,
MCQData_17_20,
PAQData_17_20,
SLQData_17_20,
UCPREGData_17_20,
WHQData_17_20
)
#uses the reduce function to full join the 2017-2020 datasets list by the SEQN variable
FullData_17_20 <- reduce(datasets_17_20, full_join, by = "SEQN")
FullData_17_20$Survey_Year <- "2017-2020"
ComData <- bind_rows(FullData_17_20, FullData_21_23)
CleanedData <- ComData %>% #Storing the full data into a new dataset called CleanedData
filter(RIDAGEYR >= 18) %>% #Only includes people that are above the age of 18
filter(URXPREG != 1 | is.na(URXPREG)) #
CleanedData <- CleanedData %>% #Selecting all the variable that are relevant to the research question
select(BMXBMI, RIDAGEYR, RIAGENDR, RIDRETH1, DMDBORN4, DMDEDUC2, DMDMARTZ, DMDHHSIZ,
INDFMPIR,DR1TKCAL, DR1TPROT, DR1TCARB, DR1TFIBE, DR1TTFAT, DR1TCHOL, DR1TATOC,
DR1TVARA, DR1TVB1, DR1TVB2, DR1TNIAC, DR1TVB6, DR1TFDFE, DR1TCHL, DR1TVB12,
DR1TVC, DR1TVD, DR1TVK, DR1TCALC, DR1TPHOS, DR1TMAGN, DR1TIRON, DR1TZINC,
DR1TFOLA, DR1TB12A, DR1TFA, DR1TCOPP, DR1TSODI, DR1TPOTA, DR1TSELE, DR1TCAFF,
DR1TALCO, DR1TMOIS, DR1_320Z, DR1TSUGR, DR1TSFAT, DR1TMFAT, DR1TPFAT, DR1TATOA,
DR1TRET, DR1TACAR, DR1TBCAR, DR1TCRYP, DR1TLYCO, DR1TLZ, DR1TFA, DR1TFF, DR1TTHEO,
DSQTKCAL, DSQTPROT, DSQTCARB, DSQTFIBE, DSQTTFAT, DSQTCHOL, DSQTVB1, DSQTVB2, DSQTNIAC,
DSQTVB6, DSQTFDFE, DSQTCHL, DSQTVB12, DSQTVC, DSQTVK, DSQTVD, DSQTCALC, DSQTPHOS,
DSQTMAGN, DSQTIRON, DSQTZINC, DSQTCOPP, DSQTSODI, DSQTPOTA, DSQTSELE, DSQTCAFF, DSQTSUGR,
DSQTSFAT, DSQTMFAT, DSQTPFAT, DSQTLYCO, DSQTLZ, DSQTFA, DSQTIODI,
LBXGLU, LBXIN, LBXGH, HIQ011, MCQ160M, MCQ160L, MCQ053, BPQ101D,
BPQ020, BPQ030, SLD012, SLD013, PAD800, PAD820, PAD680, WHQ070, MCQ550, Survey_Year)
sum(duplicated(CleanedData)) #Check for duplicate rows
#After running this, we can see there are no duplicate rows
#Converting 7, 9, 77, 99, 7777, 9999, which mean don't know and refused to answer, to NA.
CleanedData <- CleanedData %>%
mutate(across(c( DMDBORN4, DMDEDUC2, DMDMARTZ,HIQ011, MCQ160M, MCQ550, MCQ160L, MCQ053, BPQ101D, BPQ020, BPQ030, PAD800, PAD820, PAD680, WHQ070),
~ replace(., .%in% c(7,9,77,99,7777,9999), NA)))
#Renaming columns
CleanedData <- CleanedData %>%
rename(
Age = RIDAGEYR, #Demographic Features
Gender = RIAGENDR,
Race = RIDRETH1,
Country_of_Origin = DMDBORN4,
Education_Level = DMDEDUC2,
Marital_Status = DMDMARTZ,
Household_Size = DMDHHSIZ,
Family_Income_to_Poverty_Ratio = INDFMPIR,
Vitamin_E_Alpha_Tocopherol = DR1TATOC, #Total Nutrition Intake Features
Added_Alpha_Tocopherol = DR1TATOA,
Retinol = DR1TRET,
Vitamin_A = DR1TVARA,
Alpha_Carotene = DR1TACAR,
Beta_Carotene = DR1TBCAR,
Beta_Cryptoxanthin = DR1TCRYP,
Total_Folate = DR1TFOLA,
Food_Folate = DR1TFF,
Added_Vitamin_B12 = DR1TB12A,
Theobromine = DR1TTHEO,
Alcohol = DR1TALCO,
Moisture = DR1TMOIS,
Total_Plain_Water = DR1_320Z,
Iodine = DSQTIODI,
Plasma_Fasting_Glucose = LBXGLU, # Laboratory Features
Insulin = LBXIN,
Glycohemoglobin = LBXGH,
Health_Insurance = HIQ011, # Questionnaire Features
Thyroid_Problem = MCQ160M,
Liver_Condition = MCQ160L,
Taking_Treatment_Anemia = MCQ053,
Gallstones = MCQ550,
Blood_Cholesterol_Meds = BPQ101D,
Told_High_BP = BPQ020,
Told_High_BP_2 = BPQ030,
Sleep_Hours_Weekdays = SLD012,
Sleep_Hours_Weekends = SLD013,
Minutes_Moderate_LTPA = PAD800,
Minutes_Vigorous_LTPA = PAD820,
Minutes_Sedentary_Activity = PAD680,
Attempted_Weight_Loss_Past_Year = WHQ070
)
#Change features that are labeled as numeric but are actually categorical to factor
CleanedData <- CleanedData %>%
mutate(
Gender = factor(Gender,
levels = c(1,2),
labels = c("Male", "Female")),
Race = factor(Race,
levels = c(1,2,3,4,5),
labels = c("Mexican American", "Other Hispanic", "Non-Hispanic White",
"Non-Hispanic Black", "Other Race")),
Country_of_Origin = factor(Country_of_Origin,
levels = c(1,2),
labels = c("Born in United States", "Others")),
Education_Level = factor(Education_Level,
levels = c(1,2,3,4,5),
labels = c("Less than 9th grade", "9-11th grade(12th with no diploma)", "High school graduate/GED",
"Some college or AA Degree", "College graduate or above")),
Marital_Status = factor(Marital_Status,
levels = c(1,2,3),
labels = c("Married/Living with partner", "Widowed/Divorced/Seperated", "Never married")),
Health_Insurance = factor(Health_Insurance,
levels = c(1,2),
labels = c("Yes", "No")),
Thyroid_Problem = factor(Thyroid_Problem,
levels = c(1,2),
labels = c("Yes", "No")),
Gallstones = factor(Gallstones,
levels = c(1,2),
labels = c("Yes", "No")),
Liver_Condition = factor(Liver_Condition,
levels = c(1,2),
labels = c("Yes", "No")),
Taking_Treatment_Anemia = factor(Taking_Treatment_Anemia,
levels = c(1,2),
labels = c("Yes", "No")),
Blood_Cholesterol_Meds = factor(Blood_Cholesterol_Meds,
levels = c(1,2),
labels = c("Yes", "No")),
Told_High_BP = factor(Told_High_BP,
levels = c(1,2),
labels = c("Yes", "No")),
Told_High_BP_2 = factor(Told_High_BP_2,
levels = c(1,2),
labels = c("Yes", "No")),
Attempted_Weight_Loss_Past_Year = factor(Attempted_Weight_Loss_Past_Year,
levels = c(1,2),
labels = c("Yes", "No"))
)
#Function to add the features together.
#If one has a value and the other has a NA, then the one value will be used.
#If both have value it will add the value together.
#If both are NA, it keeps the total value as NA for that row.
Sum_func <- function(a,b) {
ifelse(is.na(a) & is.na(b), NA, rowSums(cbind(a,b), na.rm = TRUE))
}
CleanedData <- CleanedData %>%
mutate(
Total_Energy = Sum_func(DR1TKCAL, DSQTKCAL),
Total_Protein = Sum_func(DR1TPROT, DSQTPROT),
Total_Carbs = Sum_func(DR1TCARB, DSQTCARB),
Total_Sugar = Sum_func(DR1TSUGR, DSQTSUGR),
Total_Fiber = Sum_func(DR1TFIBE, DSQTFIBE),
Total_Fat = Sum_func(DR1TTFAT, DSQTTFAT),
Total_Sat_Fat = Sum_func(DR1TSFAT, DSQTSFAT),
Total_Mono_Sat_Fat = Sum_func(DR1TMFAT, DSQTMFAT),
Total_Poly_Sat_Fat = Sum_func(DR1TPFAT, DSQTPFAT),
Total_Cholesterol = Sum_func(DR1TCHOL, DSQTCHOL),
Total_Lycopene = Sum_func(DR1TLYCO, DSQTLYCO),
Total_Lutein_Zeaxanthin = Sum_func(DR1TLZ, DSQTLZ),
Total_Thiamin = Sum_func(DR1TVB1, DSQTVB1),
Total_Riboflavin = Sum_func(DR1TVB2, DSQTVB2),
Total_Niacin = Sum_func(DR1TNIAC, DSQTNIAC),
Total_VitaminB6 = Sum_func(DR1TVB6, DSQTVB6),
Total_Folic_Acid = Sum_func(DR1TFA, DSQTFA),
Total_Folate_DFE = Sum_func(DR1TFDFE, DSQTFDFE),
Total_Choline = Sum_func(DR1TCHL, DSQTCHL),
Total_VitaminB12 = Sum_func(DR1TVB12, DSQTVB12),
Total_VitaminC = Sum_func(DR1TVC, DSQTVC),
Total_VitaminK = Sum_func(DR1TVK, DSQTVK),
Total_VitaminD = Sum_func(DR1TVD, DSQTVD),
Total_Calcium = Sum_func(DR1TCALC, DSQTCALC),
Total_Phosphorus = Sum_func(DR1TPHOS, DSQTPHOS),
Total_Magnesium = Sum_func(DR1TMAGN, DSQTMAGN),
Total_Iron = Sum_func(DR1TIRON, DSQTIRON),
Total_Zinc = Sum_func(DR1TZINC, DSQTZINC),
Total_Copper = Sum_func(DR1TCOPP, DSQTCOPP),
Total_Sodium = Sum_func(DR1TSODI, DSQTSODI),
Total_Potassium = Sum_func(DR1TPOTA, DSQTPOTA),
Total_Selenium = Sum_func(DR1TSELE, DSQTSELE),
Total_Caffeine = Sum_func(DR1TCAFF, DSQTCAFF)
) %>%
select(
- starts_with("DR1T"), # Removes original features and only keeps the total feature column
- starts_with("DSQ")
)
#Creating Target Variable
CleanedData$BMXBMI <- as.numeric(CleanedData$BMXBMI)
CleanedData <- CleanedData %>%
mutate(BMI = ifelse(BMXBMI >= 18.5 & BMXBMI <= 24.9, "Healthy", "Unhealthy"),
BMI_Binary = ifelse(BMI == "Healthy", 1,0))
table(CleanedData$BMI, useNA = "ifany")
saveRDS(CleanedData, "CleanedDataNew1.rds")
CleanedDataNew <- readRDS("CleanedDataNew1.rds")
install.packages("moments")
install.packages("RColorBrewer")
install.packages("tidyverse")
install.packages("patchwork")
install.packages("corrplot")
knitr::opts_chunk$set(echo = TRUE)
CleanedDataNew <- readRDS("CleanedDataNew1.rds")
file.exists("CleanedDataNew1")
CleanedDataNew <- readRDS("CleanedDataNew1.rds")
str(CleanedDataNew)
sum_cat_var <- CleanedDataNew %>%
select("Gender","Race","Country_of_Origin","Education_Level","Marital_Status", "Health_Insurance",
"Thyroid_Problem","Gallstones","Liver_Condition","Taking_Treatment_Anemia", "Blood_Cholesterol_Meds",
"Told_High_BP", "Told_High_BP_2", "Attempted_Weight_Loss_Past_Year", "BMI") %>%
pivot_longer(cols = everything(), names_to = "Features", values_to = "Value") %>%
group_by(Features, Value) %>%
summarise(Frequency = n(), .groups= "drop") %>%
group_by(Features) %>%
mutate(
Percentage = round(Frequency / sum(Frequency) * 100, 2),
Proportion = round(Frequency / sum(Frequency), 2)
) %>%
ungroup()
library(moments)
library(RColorBrewer)
library(tidyverse)
library(patchwork)
library(corrplot)
#Distribution for the numeric BMI variable
p1 <- ggplot(CleanedDataNew, aes(x = BMXBMI)) +
geom_histogram(fill = "#56B4E9", color = "black")+
labs(
title = "Distribution of BMI",
x = "BMI",
y = "Count"
)+
theme_minimal()
#Distribution for the binary BMI variable
p2 <- ggplot(CleanedDataNew, aes(x = factor(BMI), fill = factor(BMI))) +
geom_bar(color = "black")+
scale_fill_manual(values = c("#0072B2", "#E69F00"))+
labs(
title = "Distribution of BMI Binary",
x = "BMI Category",
y = "Count",
fill = "BMI Category"
)+
theme_minimal()
mergeBMI = p1 + p2 + plot_layout(ncol = 1)
mergeBMI
setwd("C:/Users/kboom/OneDrive/Documents/GitHub/Data-Science-Capstone") #Working directory for desktop computer
Seed <- 50
#2021-2023 Data
BMXData_21_23 <- read_xpt("RawData/BMX_L.xpt") #Body Measurements Data
install.packages("tidyverse")
install.packages("tidyverse")
library(tidyverse)
library(haven)
library(tidymodels)
library(mice)
library(glmnet)
library(fastDummies)
library(xgboost)
library(ggplot2)
library(xgboost)
library(tibble)
library(themis)
library(caret)
library(corrplot)
library(shapviz)
library(parsnip)
library(probably)
library(dials)
setwd("C:/Users/kboom/OneDrive/Documents/GitHub/Data-Science-Capstone") #Working directory for desktop computer
Seed <- 50
#2021-2023 Data
BMXData_21_23 <- read_xpt("RawData/BMX_L.xpt") #Body Measurements Data
BPQData_21_23 <- read_xpt("RawData/BPQ_L.xpt") #Blood Pressure and Cholesterol Data
DemoData_21_23 <- read_xpt("RawData/DEMO_L.xpt") #Demographic Data
DR1TOTData_21_23 <- read_xpt("RawData/DR1TOT_L.xpt") #Dietary Interview - Total Nutrient Intakes, First Day
DSQTOTData_21_23 <- read_xpt("RawData/DSQTOT_L.xpt") #Dietary Supplement Use 30-Day - Total Dietary Supplements
GHBData_21_23 <- read_xpt("RawData/GHB_L.xpt") #Glycohemoglobin
GLUData_21_23 <- read_xpt("RawData/GLU_L.xpt") #Plasma Fasting Glucose
HIQData_21_23 <- read_xpt("RawData/HIQ_L.xpt") #Health Insurance
INSData_21_23 <- read_xpt("RawData/INS_L.xpt") #Insulin
MCQData_21_23 <- read_xpt("RawData/MCQ_L.xpt") #Medical Conditions
PAQData_21_23 <- read_xpt("RawData/PAQ_L.xpt") #Physical Activity
SLQData_21_23 <- read_xpt("RawData/SLQ_L.xpt") #Sleep Disorders
UCPREGData_21_23 <- read_xpt("RawData/UCPREG_L.xpt") #Urine Pregnancy Test
WHQData_21_23 <- read_xpt("RawData/WHQ_L.xpt") #Weight History
#Puts all the individual datasets into one list called datasets_21_23
datasets_21_23 <- list(
BMXData_21_23,
BPQData_21_23,
DemoData_21_23,
DR1TOTData_21_23,
DSQTOTData_21_23,
GHBData_21_23,
GLUData_21_23,
HIQData_21_23,
INSData_21_23,
MCQData_21_23,
PAQData_21_23,
SLQData_21_23,
UCPREGData_21_23,
WHQData_21_23
)
FullData_21_23 <- reduce(datasets_21_23, full_join, by = "SEQN") #uses the reduce function to full join the 2021-2023 datasets list by the SEQN variable
FullData_21_23$Survey_Year <- "2021-2023"
#2017-2020 Data
BMXData_17_20 <- read_xpt("RawData/P_BMX.xpt") #Body Measurements Data
BPQData_17_20 <- read_xpt("RawData/P_BPQ.xpt") #Blood Pressure and Cholesterol Data
DemoData_17_20 <- read_xpt("RawData/P_DEMO.xpt") #Demographic Data
DR1TOTData_17_20 <- read_xpt("RawData/P_DR1TOT.xpt") #Dietary Interview - Total Nutrient Intakes, First Day
DSQTOTData_17_20 <- read_xpt("RawData/P_DSQTOT.xpt") #Dietary Supplement Use 30-Day - Total Dietary Supplements
GHBData_17_20 <- read_xpt("RawData/P_GHB.xpt") #Glycohemoglobin
GLUData_17_20 <- read_xpt("RawData/P_GLU.xpt") #Plasma Fasting Glucose
HIQData_17_20 <- read_xpt("RawData/P_HIQ.xpt") #Health Insurance
INSData_17_20 <- read_xpt("RawData/P_INS.xpt") #Insulin
MCQData_17_20 <- read_xpt("RawData/P_MCQ.xpt") #Medical Conditions
PAQData_17_20 <- read_xpt("RawData/P_PAQ.xpt") #Physical Activity
SLQData_17_20 <- read_xpt("RawData/P_SLQ.xpt") #Sleep Disorders
UCPREGData_17_20 <- read_xpt("RawData/P_UCPREG.xpt") #Urine Pregnancy Test
WHQData_17_20 <- read_xpt("RawData/P_WHQ.xpt") #Weight History
#Puts all the individual datasets into one list called datasets_17_20
datasets_17_20 <- list(
BMXData_17_20,
BPQData_17_20,
DemoData_17_20,
DR1TOTData_17_20,
DSQTOTData_17_20,
GHBData_17_20,
GLUData_17_20,
HIQData_17_20,
INSData_17_20,
MCQData_17_20,
PAQData_17_20,
SLQData_17_20,
UCPREGData_17_20,
WHQData_17_20
)
#uses the reduce function to full join the 2017-2020 datasets list by the SEQN variable
FullData_17_20 <- reduce(datasets_17_20, full_join, by = "SEQN")
FullData_17_20$Survey_Year <- "2017-2020"
ComData <- bind_rows(FullData_17_20, FullData_21_23)
CleanedData <- ComData %>% #Storing the full data into a new dataset called CleanedData
filter(RIDAGEYR >= 18) %>% #Only includes people that are above the age of 18
filter(URXPREG != 1 | is.na(URXPREG)) #
CleanedData <- CleanedData %>% #Selecting all the variable that are relevant to the research question
select(BMXBMI, RIDAGEYR, RIAGENDR, RIDRETH1, DMDBORN4, DMDEDUC2, DMDMARTZ, DMDHHSIZ,
INDFMPIR,DR1TKCAL, DR1TPROT, DR1TCARB, DR1TFIBE, DR1TTFAT, DR1TCHOL, DR1TATOC,
DR1TVARA, DR1TVB1, DR1TVB2, DR1TNIAC, DR1TVB6, DR1TFDFE, DR1TCHL, DR1TVB12,
DR1TVC, DR1TVD, DR1TVK, DR1TCALC, DR1TPHOS, DR1TMAGN, DR1TIRON, DR1TZINC,
DR1TFOLA, DR1TB12A, DR1TFA, DR1TCOPP, DR1TSODI, DR1TPOTA, DR1TSELE, DR1TCAFF,
DR1TALCO, DR1TMOIS, DR1_320Z, DR1TSUGR, DR1TSFAT, DR1TMFAT, DR1TPFAT, DR1TATOA,
DR1TRET, DR1TACAR, DR1TBCAR, DR1TCRYP, DR1TLYCO, DR1TLZ, DR1TFA, DR1TFF, DR1TTHEO,
DSQTKCAL, DSQTPROT, DSQTCARB, DSQTFIBE, DSQTTFAT, DSQTCHOL, DSQTVB1, DSQTVB2, DSQTNIAC,
DSQTVB6, DSQTFDFE, DSQTCHL, DSQTVB12, DSQTVC, DSQTVK, DSQTVD, DSQTCALC, DSQTPHOS,
DSQTMAGN, DSQTIRON, DSQTZINC, DSQTCOPP, DSQTSODI, DSQTPOTA, DSQTSELE, DSQTCAFF, DSQTSUGR,
DSQTSFAT, DSQTMFAT, DSQTPFAT, DSQTLYCO, DSQTLZ, DSQTFA, DSQTIODI,
LBXGLU, LBXIN, LBXGH, HIQ011, MCQ160M, MCQ160L, MCQ053, BPQ101D,
BPQ020, BPQ030, SLD012, SLD013, PAD800, PAD820, PAD680, WHQ070, MCQ550, Survey_Year)
sum(duplicated(CleanedData)) #Check for duplicate rows
#After running this, we can see there are no duplicate rows
#Converting 7, 9, 77, 99, 7777, 9999, which mean don't know and refused to answer, to NA.
CleanedData <- CleanedData %>%
mutate(across(c( DMDBORN4, DMDEDUC2, DMDMARTZ,HIQ011, MCQ160M, MCQ550, MCQ160L, MCQ053, BPQ101D, BPQ020, BPQ030, PAD800, PAD820, PAD680, WHQ070),
~ replace(., .%in% c(7,9,77,99,7777,9999), NA)))
#Renaming columns
CleanedData <- CleanedData %>%
rename(
Age = RIDAGEYR, #Demographic Features
Gender = RIAGENDR,
Race = RIDRETH1,
Country_of_Origin = DMDBORN4,
Education_Level = DMDEDUC2,
Marital_Status = DMDMARTZ,
Household_Size = DMDHHSIZ,
Family_Income_to_Poverty_Ratio = INDFMPIR,
Vitamin_E_Alpha_Tocopherol = DR1TATOC, #Total Nutrition Intake Features
Added_Alpha_Tocopherol = DR1TATOA,
Retinol = DR1TRET,
Vitamin_A = DR1TVARA,
Alpha_Carotene = DR1TACAR,
Beta_Carotene = DR1TBCAR,
Beta_Cryptoxanthin = DR1TCRYP,
Total_Folate = DR1TFOLA,
Food_Folate = DR1TFF,
Added_Vitamin_B12 = DR1TB12A,
Theobromine = DR1TTHEO,
Alcohol = DR1TALCO,
Moisture = DR1TMOIS,
Total_Plain_Water = DR1_320Z,
Iodine = DSQTIODI,
Plasma_Fasting_Glucose = LBXGLU, # Laboratory Features
Insulin = LBXIN,
Glycohemoglobin = LBXGH,
Health_Insurance = HIQ011, # Questionnaire Features
Thyroid_Problem = MCQ160M,
Liver_Condition = MCQ160L,
Taking_Treatment_Anemia = MCQ053,
Gallstones = MCQ550,
Blood_Cholesterol_Meds = BPQ101D,
Told_High_BP = BPQ020,
Told_High_BP_2 = BPQ030,
Sleep_Hours_Weekdays = SLD012,
Sleep_Hours_Weekends = SLD013,
Minutes_Moderate_LTPA = PAD800,
Minutes_Vigorous_LTPA = PAD820,
Minutes_Sedentary_Activity = PAD680,
Attempted_Weight_Loss_Past_Year = WHQ070
)
str(CleanedData)
View(CleanedData)
